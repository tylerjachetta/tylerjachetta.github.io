<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Historical Events of WWII</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script>
	var map;
	var markerData;

	function loadjson() {
		$.getJSON( "markers.json",
				function( returnedData ) {
					// next line copies json data loaded in local var
					// into a global variable that createMap() function can access
					markerData = returnedData;
					createMap();
				}
			 );
	}

	function createMap() {
		console.log(markerData[0].title)
		var mapOptions = {
			zoom: 5,
			center: new google.maps.LatLng(49.108552, 15.459526),
			disableDefaultUI: true,
			styles:[
			{"featureType":"administrative","elementType":"all","stylers":[{"visibility":"on"},{"lightness":33}]},
			{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2e5d4"}]},
			{"featureType":"poi.park","elementType":"geometry","stylers":[{"color":"#c5dac6"}]},
			{"featureType":"poi.park","elementType":"labels","stylers":[{"visibility":"on"},{"lightness":20}]},
			{"featureType":"road","elementType":"all","stylers":[{"visibility":"off"}]},
			{"featureType":"road.highway","elementType":"geometry","stylers":[{"visibility":"off"}]},
			{"featureType":"road.arterial","elementType":"geometry","stylers":[{"visibility":"off"}]},
			{"featureType":"road.local","elementType":"geometry","stylers":[{"visibility":"off"}]},
			{"featureType":"water","elementType":"all","stylers":[{"visibility":"on"},{"color":"#acbcc9"}]},
			{"featureType":"administrative.neighborhood","elementType":"labels","stylers":[{"visibility":"off"}]},
			{"featureType":"administrative.land_parcel","elementType":"labels","stylers":[{"visibility":"off"}]},
			{"featureType":"administrative.locality","elementType":"labels","stylers":[{"visibility":"off"}]}]
		};
		map = new google.maps.Map(document.getElementById("map-container"), mapOptions);

		var infowindow = new google.maps.InfoWindow();

		for (var counter = 0; counter < markerData.length; counter++ ) 
		{
			var data = markerData[counter];
			var markerPosition = new google.maps.LatLng(data.lat, data.lng);
			
			(function(){ 
				var marker = new google.maps.Marker({
    			position: markerPosition,
    			map: map,
    			title: data.title,
    			animation: google.maps.Animation.DROP
  			});
  			}, 3000
			
  			(function( marker, data ) {
				google.maps.event.addListener( marker, "click", 
					function() {
						infowindow.setContent( data.description );
						infowindow.open( map, marker );
					}
				);
			}
			)( marker,  data );
		}


	}


	</script>
</head>
<body onload="loadjson();">
       
    <h1>Historical Events of WWII</h1>

	<div id="map-container">
	</div>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

	<!-- Load the Google Maps API library -->
	<script type="text/javascript" src="https://maps.google.com/maps/api/js?libraries=geometry&key=AIzaSyANwuVysbRlA9s-4mgKvkdxL0ODklj-Hhg"></script>
	

</body>
</html>