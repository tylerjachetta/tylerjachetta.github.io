<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Sorting Visualized</title>
    <style>
        html {
            background: #212121;
        }
        
        #bubbleSort {
            width: 500px;
           	margin: auto;
           	background: #303030;
           	border: 1px solid #636262;
        }
        
        #selectionSort {
           width: 500px;
           margin: auto;
           background: #303030;
           border: 1px solid #636262;


        }
        
        #cocktailSort {
            width: 500px;
            margin: auto;
            background: #303030;
            border: 1px solid #636262;


        }
        
        #gnomeSort {
		    width: 500px;
		    margin: auto;
		    background: #303030;
		    border: 1px solid #636262;


        }
        
        #insertionSort {
            width: 500px;
           	margin: auto;
           	background: #303030;
           	border: 1px solid #636262;


        }
        
        p {
            font-family: monospace;
            font-size: 21px;
            color: #e9e9e9;
            margin-top: 0px;
            text-align: center;
        }
        
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

</head>

<body>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    
    <div id="bubbleSort">
    <p> Bubble Sort</p>
    </div>
    <div id="selectionSort">
    <p> Selection Sort</p>
    </div>
    <div id="cocktailSort">
    <p> Cocktail Sort</p>
    </div>
    <div id="gnomeSort">
    <p> Gnome Sort</p>
    </div>
    <div id="insertionSort">
    <p> Insertion Sort</p>
    </div>
    <script>
        var w = 500;
        var h = 100;
        var barPadding = 1;

        var dataset = [];
        var dataset2 = [];
        var dataset3 = [];
        var dataset4 = [];
        var dataset5 = [];
        var dataset6 = [];



        for (i = 0; i < 50; i++)
        {
            dataset[i] = i + 1;
        }

        var idArray = [];
        //d3.select(container).selectAll("rect").remove();
        for (var j = 0; j < dataset.length; j++)
        {
            idArray[j] = j;
        }
        
        /*
        var j = 0;
        for (i = 0; i < 50; i++) 
        { 
          if(i % 5 == 0)
          {
            j += 5;
          }
            dataset[i] = j;
        }
        */

        //dataset.reverse();
       	shuffle(dataset);
        dataset2 = dataset.slice();
        dataset3 = dataset.slice();
        dataset4 = dataset.slice();
        dataset5 = dataset.slice();
        dataset6 = dataset.slice();



        bubbleSort(dataset);
        selectionSort(dataset2);
        cocktailSort(dataset3);
        gnomeSort(dataset4);
        insertionSort(dataset5);

        function createGraph(items, container)
        {

        	d3.select(container)
                .append("svg")
                .attr("width", w)
                .attr("height", h);

            d3.select(container).select("svg").selectAll("rect")
                .data(idArray)
                .enter()
                .append("rect")
                .attr("id", function(i)
                {
                    return "s" + i; // HTML id's cannot begin with #, so added s - short for selection

                });

            for (var i = 0; i < items.length; i++)
            {
                (function(i)
                {
                    setTimeout(function()
                    {
                        updateGraph(items[i], container);
                        if(items[i] == items[items.length - 1])
                        {
                        	showSortedGraph(items[i], container);
                        }
                    }, i * 10);
                })(i);
                //Integer at end of the setTimeout is the delay between each iteration 
            }
        }

     

        function updateGraph(items, container)
        {
            for (var j = 0; j < items.length; j++)
            {
            	if (!($(container).find("#s" + j).attr('height') ==  items[j] * (100 / items.length)))
            	{
	                d3.select(container).select("svg").select("#s" + (j))
	                .attr("x", function()
	                {
	                    return j * (w / items.length);
	                })
	                .attr("y", function()
	                {
	                    return h - items[j] * (100 / items.length);
	                })
	                .attr("width", w / items.length - barPadding)
	                .attr("height", function()
	                {
	                    return items[j] * (100 / items.length);
	                })
	                .attr("fill", function()
	                {
	                	return "rgb(156,21,19)";

	                });
                }
                else
                {
                	d3.select(container).select("svg").select("#s" + (j))
                	.attr("fill", function()
                	{
                		return "rgb(255, 255, 255)";
                	});
                }
            }


        }

        function showSortedGraph(items, container)
        {
        	for (var i = 0; i < items.length; i++)
        	{
        	    d3.select(container).select("svg").select("#s" + (i))
                .attr("fill", function()
                {
                	return "rgb(255, 255, 255)";
                });

        	}
        	

	        for (var i = 0; i < items.length; i++)
	        {
	            (function(i)
	            {
	                setTimeout(function()
	                {
	                    d3.select(container).select("svg").select("#s" + (i))
	                    .attr("fill", function()
	                    {
	                    	return "rgb(75, 152, 40)";
	                    });

	                    d3.select(container).select("svg").select("#s" + (i + 1))
	                    .attr("fill", function()
	                    {
	                    	return "rgb(156,21,19)";
	                    });
	                }, i * 20);
	            })(i);

	        }
        }

        function bubbleSort(items)
        {
            var swapped;
            var displayArray = [];
            do {
                swapped = false;
                for (var i = 0; i < items.length; i++)
                {
                    displayArray.push(items.slice());
                    if (items[i] > items[i + 1])
                    {
                        var temp = items[i];
                        items[i] = items[i + 1];
                        items[i + 1] = temp;
                        swapped = true;
                    }
                }
            } while (swapped);
            createGraph(displayArray, "#bubbleSort");
        }

        function selectionSort(items)
        {

            var len = items.length,
                min;
            var displayArray = [];

            for (i = 0; i < len; i++)
            {

                min = i;
                for (j = i + 1; j < len; j++)
                {
                    displayArray.push(items.slice());
                    if (items[j] < items[min])
                    {
                        min = j;
                    }
                }

                //if the minimum isn't in the position, swap it
                if (i != min)
                {
                    swap(items, i, min);
                }

            }
            displayArray.push(items.slice());

            createGraph(displayArray, "#selectionSort");
        }

        function cocktailSort(items)
        {
            var swapped;
            var displayArray = [];

            do {
                for (var i = 0; i < items.length - 2; i++)
                {
                    displayArray.push(items.slice());
                    if (items[i] > items[i + 1])
                    {
                        var temp = items[i];
                        items[i] = items[i + 1];
                        items[i + 1] = temp;
                        swapped = true;
                    }
                }
                if (!swapped)
                {
                    break;
                }
                swapped = false;
                for (i = items.length - 2; i > 0; i--)
                {
                    displayArray.push(items.slice());
                    if (items[i] > items[i + 1])
                    {
                        var temp1 = items[i];
                        items[i] = items[i + 1];
                        items[i + 1] = temp1;
                        swapped = true;
                    }
                }
            } while (swapped);

            createGraph(displayArray, "#cocktailSort")
        }

        function insertionSort(items)
        {

            var len = items.length,
                value,
                i,
                j,
                displayArray = [];

            for (i = 0; i < len; i++)
            {
                value = items[i];
                for (j = i - 1; j > -1 && items[j] > value; j--)
                {
                    items[j + 1] = items[j];
                    displayArray.push(items.slice());
                }
                items[j + 1] = value;
            }
            displayArray.push(items.slice());

            createGraph(displayArray, "#insertionSort")
        }



        function gnomeSort(items)
        {
            i = 0;
            var displayArray = [];
            while (i < items.length)
            {
                displayArray.push(items.slice());
                if (i == 0 || items[i - 1] <= items[i])
                {
                    i++;
                }
                else
                {
                    tmp = items[i];
                    items[i] = items[i - 1];
                    items[--i] = tmp;
                }
            }
            createGraph(displayArray, "#gnomeSort")

        }

        function mergeSort(items)
        {
            // Terminal case: 0 or 1 item arrays don't need sorting
            if (items.length < 2)
            {
                return items;
            }

            var middle = Math.floor(items.length / 2),
                left = items.slice(0, middle),
                right = items.slice(middle);
            return merge(mergeSort(left), mergeSort(right));
        }

        function merge(left, right)
        {

            var displayArray = [];

            var result = [],
                il = 0,
                ir = 0;

            while (il < left.length && ir < right.length)
            {


                if (left[il] < right[ir])
                {
                    result.push(left[il++]);
                }
                else
                {
                    result.push(right[ir++]);
                }
            }

            return result.concat(left.slice(il)).concat(right.slice(ir));
        }

        function swap(items, firstIndex, secondIndex)
        {
            var temp = items[firstIndex];
            items[firstIndex] = items[secondIndex];
            items[secondIndex] = temp;
        }



        function shuffle(a)
        {
            var j, x, i;

            for (i = a.length; i; i--)
            {
                j = Math.floor(Math.random() * i);
                x = a[i - 1];
                a[i - 1] = a[j];
                a[j] = x;
            }

            return a;
        }


        function isSorted(data)
        {
            for (var i = 1; i < data.length; i++)
            {
                if (data[i - 1] >= data[i])
                {
                    return false;
                }
            }
            return true;
        }
    </script>



</body>

</html>