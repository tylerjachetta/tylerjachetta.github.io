<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <title>Cards and Conditionals</title>
    
    <!-- step 1: load jQuery library -->
	<script src="jquery-1.12.0.min.js"></script>
    
    <!-- step 2: load playing cards project files (js + css) -->
	<script src="playingCards.js"></script>
	<script src="playingCards.ui.js"></script>
    <link rel="stylesheet" type="text/css" href="playingCards.ui.css">
</head>
<body style = "background-color: #006400; font-family: Arial; color: white;">
	
	<!-- step 3: provide html elements for UI -->
	<div id="controls">
		<h1 id="header"></h1>
		<button type="button" onclick="startRound();" id="startButton">
			Start!
		</button>
		<button type="button" onclick="hit();" id="hitButton" style="visibility:hidden;">
			Hit
		</button>
		<button type="button" onclick="stay();" id="stayButton" style="visibility:hidden;">
			Stay
		</button>
		<button type="button" onclick="window.location.reload();" id="restartButton" style="visibility:hidden;">
			Play again
		</button>
	</div>
	
	<h4 id="scoreboard">
	</h4>
	
	<div id="cardtray">
	</div>

	<div id="cardtray2" style="margin-left: 300px; margin-top:150px;">
	</div>
	<h4 id="scoreboard2">
	</h4>
	
	<!-- step 4: create game flow in javascript --> 
	<script>
		// set score
		var score = 0, score2 = 0;
		
		// create card deck object
        var cardDeck = $("#cardtray").playingCards();
        
        // shuffle card objects
        cardDeck.shuffle();

		function startRound() 
		{
			document.getElementById('startButton').style.display = 'none'; 
			document.getElementById('hitButton').style.visibility = 'visible'; 
			document.getElementById('stayButton').style.visibility = 'visible'; 

			// draw one card object from deck
			var card1 = cardDeck.draw();
			var card2 = cardDeck.draw();

			var dcard1 = cardDeck.draw();
			var dcard2 = cardDeck.draw();

			// log card object to browser console for observing
			console.log( card1 );
			console.log( card2 );
			getCardValue(card1);
			getCardValue(card2);

			getCardValueD(dcard1);
			getCardValueD(dcard2);

			// use conditional statement, if, to decide scoring
			
			
			// output score
			$('#scoreboard').html( score );
			$('#scoreboard2').html( score2 );


			// output html for card drawn
			var markup = card1.getHTML();
			$('#cardtray').append( markup );

			var markup = card2.getHTML();
			$('#cardtray').append( markup );

			var markup = dcard1.getHTML();
			$('#cardtray2').append( markup );

			var markup = dcard2.getHTML();
			$('#cardtray2').append( markup );
		}

		

		function getCardValue (card)
		{
			if ( ( card.rank == 'Q' ) || (card.rank == 'K') || (card.rank == 'J'))
			{
				score += 10; // score++;
				
			} 
			else if ( card.rank == 'A' )
			{

				score++; // score--;
			}
			else
			{
				score += Number(card.rank); // score--;
			}

			if(score > 21)
			{
				loss();

			}
			
		}

		function getCardValueD (card)
		{
			if ( ( card.rank == 'Q' ) || (card.rank == 'K') || (card.rank == 'J'))
			{
				score2 += 10; // score++;
				
			} 
			else if ( card.rank == 'A' )
			{
				score2++; // score--;
			}
			else
			{
				score2 += Number(card.rank); // score--;
			}

			if(score2 > 21)
			{
				win();
			}
		}
		function hit ()
		{
			var newCard = cardDeck.draw();
			getCardValue (newCard);
			$('#scoreboard').html( score );
			markup = newCard.getHTML();
			$('#cardtray').append( markup );

			hitD();
		}

		function hitD ()
		{
			var chance = Math.floor((Math.random() * 10) + 1);
			console.log(chance);
			
			if(score2 <= 10)
			{
				var newCard = cardDeck.draw();
				getCardValueD (newCard);
				$('#scoreboard2').html( score2 );
				markup = newCard.getHTML();
				$('#cardtray2').append( markup );
			}
			else if (score2 < 17)
			{
				var chance = Math.floor((Math.random() * 10) + 1);
				console.log(chance);

				if(chance < 7)
				{
					var newCard = cardDeck.draw();
					getCardValueD (newCard);
					$('#scoreboard2').html( score2 );
					markup = newCard.getHTML();
					$('#cardtray2').append( markup );
				}
			}
		
		}
		
		function restart()
		{
			document.getElementById('stayButton').style.display = 'none'; 
			document.getElementById('hitButton').style.display = 'none'; 
			document.getElementById('restartButton').style.visibility = 'visible'; 
		}

		function stay()
		{
			
			if(score > score2)
			{
				hitD();
				win();
			}
			else if(score == score2)
			{
				loss();
			}
		}

		function loss()
		{
			$('#header').html("You lose!" );
			restart();
		}

		function win()
		{

			$('#header').html("You Won!" );
			restart();
		}
    </script>
  </div>
</body>
</html>